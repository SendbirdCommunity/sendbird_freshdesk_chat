<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: SBFDChatClient</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: SBFDChatClient</h1>

    




<section>

<header>
    
        <h2><span class="attribs"><span class="type-signature"></span></span>SBFDChatClient<span class="signature">()</span><span class="type-signature"></span></h2>
        
            <div class="class-description">Class to manage the client, channels, and messages.</div>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    
    <h2>Constructor</h2>
    

    
    <h4 class="name" id="SBFDChatClient"><span class="type-signature"></span>new SBFDChatClient<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Initializes the chat client.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line16">line 16</a>
    </li></ul></dd>
    

    

    

    
</dl>




















    
    </div>

    

    

    

    

    

    

    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    
    <h4 class="name" id="addMessageInputListener"><span class="type-signature"></span>addMessageInputListener<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Adds a listener for the message input.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line208">line 208</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id="buildMessageCollection"><span class="type-signature">(async) </span>buildMessageCollection<span class="signature">(channelUrl)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Builds the message collection for a specific channel URL.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>channelUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The URL of the channel.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line232">line 232</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the operation is complete.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="fetchChannelList"><span class="type-signature">(async) </span>fetchChannelList<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;object>}</span></h4>
    

    



<div class="description">
    Fetches the channel list.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line280">line 280</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves with the channel collection.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;object></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id="getSessionTokenExpiry"><span class="type-signature"></span>getSessionTokenExpiry<span class="signature">()</span><span class="type-signature"> &rarr; {number}</span></h4>
    

    



<div class="description">
    Generates and returns the expiry timestamp for a session token.
The expiry time is calculated as the current time plus a random
duration ranging from 1 minute to 5 days, 23 hours, and 59 minutes.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line46">line 46</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    Timestamp representing the session token expiry in milliseconds since the Unix epoch.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">number</span>


    </dd>
</dl>

    




    <h5>Example</h5>
    
    <pre class="prettyprint"><code>const expiryTime = getSessionTokenExpiry();
console.log(new Date(expiryTime)); // Logs the expiration date and time for the token.</code></pre>



        
            

    

    
    <h4 class="name" id="init"><span class="type-signature">(async) </span>init<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Initializes the client and Sendbird connection.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line62">line 62</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when initialization is complete.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".cleanUpafterChanneRemoval"><span class="type-signature">(static) </span>cleanUpafterChanneRemoval<span class="signature">(channelUrls)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Cleans up the user interface and internal state after channel removal.
Specifically, this method:
- Sets the active channel URL to `null` if it matches one of the removed channel URLs.
- Clears the content of the message view and channel name in the UI if the active channel URL matches one of the removed channel URLs or if the active channel URL is `null`.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>channelUrls</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;string></span>


            
            </td>

            

            

            <td class="description last">An array of channel URLs that have been removed. The function will iterate through this array to perform cleanup for each URL.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line296">line 296</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    This method does not return a value.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".connectAndSetupChat"><span class="type-signature">(async, static) </span>connectAndSetupChat<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Connects to the chat system and sets up the chat interface.

This method handles various tasks such as:
 - Fetching the list of chat channels.
 - Setting up event handlers for those channels.
 - Rendering the initial chat user interface.
 - Initializing the active chat channel and associated message collections.

If the channel collection contains no channels, a notification indicating the absence of messages is shown.
If all initialization tasks complete successfully, a success notification is displayed.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line121">line 121</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        If any part of the connection or setup process encounters an issue.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the chat setup and connection are complete.
                         If an error occurs, it's logged to the console.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".initializeActiveChannel"><span class="type-signature">(static) </span>initializeActiveChannel<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Initializes the active channel by setting the active channel URL and name.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line182">line 182</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".initializeChannelHandlers"><span class="type-signature">(static) </span>initializeChannelHandlers<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Initializes the channel handlers for the channel collection.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line162">line 162</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".initializeMessageCollections"><span class="type-signature">(async, static) </span>initializeMessageCollections<span class="signature">()</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Initializes the message collections for the active channel.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line193">line 193</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the operation is complete.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".initializeSessionManager"><span class="type-signature">(async, static) </span>initializeSessionManager<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Initializes the session manager, creates a session token, connects to Sendbird,
and shows a success notification.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line90">line 90</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".renderInitialUI"><span class="type-signature">(static) </span>renderInitialUI<span class="signature">()</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Renders the initial user interface for the chat system.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line172">line 172</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".sendMessage"><span class="type-signature">(async, static) </span>sendMessage<span class="signature">(channelUrl, message)</span><span class="type-signature"> &rarr; {Promise.&lt;void>}</span></h4>
    

    



<div class="description">
    Sends a user message to a specific channel within the chat system.
This method does the following:
- Retrieves the channel using the provided channel URL.
- Constructs the message parameters and attempts to send the user message.
- On success, adds the sent message to the associated message collection.
- Logs any errors encountered during the message sending process.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>channelUrl</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The URL of the channel to which the message will be sent. Default is 'freshdesk_24'.</td>
        </tr>

    

        <tr>
            
                <td class="name"><code>message</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The text content of the message to be sent.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line347">line 347</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Throws:</h5>

        

<dl>
    <dt>
        <div class="param-desc">
        Throws an error if there is an issue retrieving the channel or sending the message.
        </div>
    </dt>
    <dd></dd>
    <dt>
        <dl>
            <dt>
                Type
            </dt>
            <dd>
                
<span class="param-type">Error</span>


            </dd>
        </dl>
    </dt>
    <dd></dd>
</dl>


    


<h5>Returns:</h5>

        
<div class="param-desc">
    A promise that resolves when the message has been successfully sent. If an error occurs during the sending process, it will be logged but not propagated.
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">Promise.&lt;void></span>


    </dd>
</dl>

    





        
            

    

    
    <h4 class="name" id=".setChannelHandler"><span class="type-signature">(static) </span>setChannelHandler<span class="signature">()</span><span class="type-signature"></span></h4>
    

    



<div class="description">
    Sets the channel handler for the channel collection.
</div>













<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line321">line 321</a>
    </li></ul></dd>
    

    

    

    
</dl>




















        
            

    

    
    <h4 class="name" id=".setChannelName"><span class="type-signature">(static) </span>setChannelName<span class="signature">(channelName)</span><span class="type-signature"> &rarr; {void}</span></h4>
    

    



<div class="description">
    Sets the channel name in the user interface.
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        

        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>channelName</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            

            

            <td class="description last">The name of the channel to be displayed.</td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="app_scripts_ctiModal.js.html">app/scripts/ctiModal.js</a>, <a href="app_scripts_ctiModal.js.html#line109">line 109</a>
    </li></ul></dd>
    

    

    

    
</dl>















<h5>Returns:</h5>

        


<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">void</span>


    </dd>
</dl>

    





        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="SBFDChannel.html">SBFDChannel</a></li><li><a href="SBFDChatClient.html">SBFDChatClient</a></li><li><a href="SBFDMessage.html">SBFDMessage</a></li><li><a href="SBFDMessageStatusHandler.html">SBFDMessageStatusHandler</a></li><li><a href="SBFDNotificationHandler.html">SBFDNotificationHandler</a></li><li><a href="SBFDSessionHandler.html">SBFDSessionHandler</a></li></ul><h3>Global</h3><ul><li><a href="global.html#SBFDChannelHandler">SBFDChannelHandler</a></li><li><a href="global.html#SBFDMessageHandler">SBFDMessageHandler</a></li><li><a href="global.html#SBFDchatClientInstance">SBFDchatClientInstance</a></li><li><a href="global.html#getUserSessionToken">getUserSessionToken</a></li><li><a href="global.html#handleError">handleError</a></li><li><a href="global.html#initializeClient">initializeClient</a></li><li><a href="global.html#invokeTemplate">invokeTemplate</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.2</a> on Tue Aug 29 2023 16:17:23 GMT+0900 (Korean Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>